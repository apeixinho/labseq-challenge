<div class="container" role="main">
  <h2>LabSeq Demo</h2>

  <form [formGroup]="aForm" (ngSubmit)="postResult()" role="form">
    <div class="cross-validation">
      <div class="form-group">
        <label for="indexValue">Index Value</label>
        <input type="number"
               id="indexValue"
               formControlName="index2Compute"
               class="form-control"
               aria-label="Enter index value"
               [attr.aria-invalid]="aForm.get('index2Compute')?.invalid">

        @if (aForm.get('index2Compute')?.invalid && (aForm.get('index2Compute')?.dirty || aForm.get('index2Compute')?.touched)) {
          <div class="alert" role="alert">
            @if (aForm.get('index2Compute')?.errors?.['required']) {
              <div>A value is required.</div>
            }
            @if (aForm.get('index2Compute')?.errors?.['min']) {
              <div>Value must be greater or equal to 0.</div>
            }
            @if (aForm.get('index2Compute')?.errors?.['max']) {
              <div>Maximum value is 20000.</div>
            }
          </div>
        }
      </div>

      <button type="submit"
              [disabled]="aForm.invalid || isLoading"
              aria-label="Calculate sequence">
        @if (isLoading) {
          <span>Computing...</span>
        } @else {
          <span>Submit</span>
        }
      </button>

      @if (error) {
        <div class="error-message" role="alert">{{error}}</div>
      }

      @if (result) {
        <p role="status">Result: {{result}}</p>
      }
    </div>
  </form>

  <router-outlet />
</div>

